FROM haskell:8 AS build
ENV HOME /
COPY . /src
WORKDIR /src
RUN stack --install-ghc build
RUN stack --local-bin-path /dist install

FROM haskell:8 AS runner
COPY --from=build /dist/* /bin
ENTRYPOINT ["/bin/HaskellDemo-exe"]
